# ERP.AERO API
REST API для управления пользователями и файлами с авторизацией по JWT-токену. Разработано с использованием **Node.js**, **Express**, **Sequelize** и **MySQL**.

--- 

## 1. API Маршруты

### 1.1. Авторизация
| Метод | URL | Описание |
|--------|------|------------|
| `POST` | `/auth/signup` | Регистрация пользователя |
| `POST` | `/auth/signin` | Авторизация, выдача `accessToken` и `refreshToken` |
| `POST` | `/auth/signin/new_token` | Обновление `accessToken` по `refreshToken` |
| `POST` | `/auth/logout` | Выход из системы, аннулирование токенов |
| `GET` | `/auth/info` | Получение информации о текущем пользователе |

### 1.2. Управление файлами
| Метод | URL | Описание |
|--------|------|------------|
| `POST` | `/file/upload` | Загрузка файла |
| `GET` | `/file/list?page=1&list_size=10` | Получение списка файлов с пагинацией |
| `GET` | `/file/:id` | Получение информации о файле |
| `GET` | `/file/:id/download` | Скачивание файла |
| `PUT` | `/file/update/:id` | Обновление загруженного файла |
| `DELETE` | `/file/delete/:id` | Удаление файла |

---

## 2. Технологии
- **Node.js** – серверный фреймворк
- **Express.js** – построение REST API
- **Sequelize ORM** – работа с MySQL
- **JWT (jsonwebtoken)** – аутентификация
- **bcrypt.js** – хеширование паролей
- **Multer** – загрузка файлов

---

## 3. Структура проекта
```
erp-aero-api/
│── src/
│   ├── config/
│   │   ├── db.ts           # Подключение к базе данных
│   ├── controllers/
│   │   ├── authController.ts   # Логика авторизации
│   │   ├── fileController.ts   # Логика работы с файлами
│   ├── middleware/
│   │   ├── authMiddleware.ts   # Проверка JWT-токена
│   ├── models/
│   │   ├── User.ts       # Модель пользователя
│   │   ├── File.ts       # Модель файла
│   ├── routes/
│   │   ├── authRoutes.ts   # Роуты авторизации
│   │   ├── fileRoutes.ts   # Роуты управления файлами
│   ├── app.ts          # Основной файл сервера
│   ├── server.ts       # Запуск сервера
│── .env                # Конфигурация окружения
│── .gitignore          # Игнорируемые файлы
│── package.json        # Список зависимостей
│── README.md           # Документация проекта
```

---

## 4. Безопасность
- **Хеширование паролей**: пароли шифруются с использованием `bcrypt.js`.
- **JWT-токены**: доступ ограничен на основе `accessToken`.
- **Обновление токенов**: `refreshToken` обновляется при каждом обновлении `accessToken`.
- **Блокировка токенов**: `accessToken` аннулируется после выхода пользователя.
- **Фильтрация файлов**: загружаются только допустимые форматы (`jpeg`, `png`, `pdf`, `docx`).

---

## 6. Контакты
**Email:** maximov.roman@outlook.com  
**TG:** https://t.me/okanekatsuro



